<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Jogo da Aninha 💖</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #fff;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background-image: url('https://harikacocuklarizmir.com/images/uploads/2dc834e1801c5d89034a2b8454d42ce8.jpg');
      background-size: cover;
      background-position: center;
      border: 2px solid black;
    }
    #scoreboard {
      font-size: 18px;
      font-weight: bold;
      margin: 10px;
    }
    .elogio {
      position: absolute;
      color: #ff69b4;
      font-size: 20px;
      font-weight: bold;
      animation: fade 2s ease-out;
    }
    @keyframes fade {
      0% { opacity: 1; top: 50%; }
      100% { opacity: 0; top: 30%; }
    }
  </style>
</head>
<body>
  <div id="scoreboard">Pontuação: 0 | Recorde: 0</div>
  <canvas id="gameCanvas" width="600" height="800"></canvas>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    let ballSpeed = 4;
    let balls = [{
      x: canvas.width / 2,
      y: canvas.height - 30,
      dx: ballSpeed,
      dy: -ballSpeed
    }];

    const paddle = {
      height: 10,
      width: 75,
      x: (canvas.width - 75) / 2
    };

    let rightPressed = false;
    let leftPressed = false;
    let score = 0;
    let highScore = localStorage.getItem("aninhaHighScore") || 0;

    const brick = {
      rowCount: 7,
      columnCount: 11,
      width: 40,
      height: 20,
      padding: 5,
      offsetTop: 40,
      offsetLeft: 20
    };

    const bricks = [];
    for(let c=0; c<brick.columnCount; c++) {
      bricks[c] = [];
      for(let r=0; r<brick.rowCount; r++) {
        // coração (formato)
        const heartShape = [
          [0,1,1,0,0,0,0,1,1,0,0],
          [1,1,1,1,0,0,1,1,1,1,0],
          [1,1,1,1,1,1,1,1,1,1,1],
          [1,1,1,1,1,1,1,1,1,1,1],
          [0,1,1,1,1,1,1,1,1,1,0],
          [0,0,1,1,1,1,1,1,1,0,0],
          [0,0,0,1,1,1,1,1,0,0,0]
        ];
        if (heartShape[r][c]) {
          bricks[c][r] = { x: 0, y: 0, status: 1 };
        }
      }
    }

    document.addEventListener("keydown", keyDownHandler);
    document.addEventListener("keyup", keyUpHandler);

    function keyDownHandler(e) {
      if(e.key === "Right" || e.key === "ArrowRight") {
        rightPressed = true;
      }
      else if(e.key === "Left" || e.key === "ArrowLeft") {
        leftPressed = true;
      }
    }

    function keyUpHandler(e) {
      if(e.key === "Right" || e.key === "ArrowRight") {
        rightPressed = false;
      }
      else if(e.key === "Left" || e.key === "ArrowLeft") {
        leftPressed = false;
      }
    }

    function drawBall(ball) {
      ctx.beginPath();
      ctx.arc(ball.x, ball.y, 10, 0, Math.PI*2);
      ctx.fillStyle = "#ff69b4";
      ctx.fill();
      ctx.closePath();
    }

    function drawPaddle() {
      ctx.beginPath();
      ctx.rect(paddle.x, canvas.height - paddle.height - 10, paddle.width, paddle.height);
      ctx.fillStyle = "#6495ED";
      ctx.fill();
      ctx.closePath();
    }

    function drawBricks() {
      for(let c = 0; c < brick.columnCount; c++) {
        for(let r = 0; r < brick.rowCount; r++) {
          if(bricks[c][r] && bricks[c][r].status === 1) {
            let brickX = (c * (brick.width + brick.padding)) + brick.offsetLeft;
            let brickY = (r * (brick.height + brick.padding)) + brick.offsetTop;
            bricks[c][r].x = brickX;
            bricks[c][r].y = brickY;
            ctx.beginPath();
            ctx.rect(brickX, brickY, brick.width, brick.height);
            ctx.fillStyle = "#ff69b4";
            ctx.fill();
            ctx.strokeStyle = "#000";
            ctx.stroke();
            ctx.closePath();

            // Coração
            ctx.fillStyle = "#000";
            ctx.font = "16px Arial";
            ctx.fillText("❤", brickX + 12, brickY + 16);
          }
        }
      }
    }

    function collisionDetection(ball) {
      for(let c = 0; c < brick.columnCount; c++) {
        for(let r = 0; r < brick.rowCount; r++) {
          let b = bricks[c][r];
          if(b && b.status === 1) {
            if(ball.x > b.x && ball.x < b.x + brick.width &&
               ball.y > b.y && ball.y < b.y + brick.height) {
              ball.dy = -ball.dy;
              b.status = 0;
              score++;
              updateScore();

              if (score % 5 === 0) {
                showElogio();
              }

              // Multiplica bolas
              if (score % 5 === 0 && balls.length < 10) {
                balls.push({
                  x: ball.x,
                  y: ball.y,
                  dx: -ball.dx,
                  dy: ball.dy
                });
              }
            }
          }
        }
      }
    }

    function showElogio() {
      const elogios = [
        "Você é um amor, Aninha!",
        "Seu sorriso ilumina tudo, Aninha!",
        "Você é muito especial, Aninha!",
        "Tão doce quanto esses corações, Aninha!",
        "Linda demais, Aninha!"
      ];
      const elogio = elogios[Math.floor(Math.random() * elogios.length)];

      const el = document.createElement("div");
      el.className = "elogio";
      el.innerText = elogio;
      el.style.left = Math.random() * (window.innerWidth - 150) + "px";
      document.body.appendChild(el);
      setTimeout(() => el.remove(), 2000);
    }

    function updateScore() {
      document.getElementById("scoreboard").innerText = `Pontuação: ${score} | Recorde: ${highScore}`;
      if(score > highScore) {
        highScore = score;
        localStorage.setItem("aninhaHighScore", highScore);
      }
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawBricks();
      drawPaddle();
      balls.forEach(drawBall);

      balls.forEach((ball, index) => {
        collisionDetection(ball);

        if(ball.x + ball.dx > canvas.width - 10 || ball.x + ball.dx < 10) {
          ball.dx = -ball.dx;
        }
        if(ball.y + ball.dy < 10) {
          ball.dy = -ball.dy;
        } else if(ball.y + ball.dy > canvas.height - 20) {
          if(ball.x > paddle.x && ball.x < paddle.x + paddle.width) {
            ball.dy = -ball.dy;
          } else {
            balls.splice(index, 1);
          }
        }

        ball.x += ball.dx;
        ball.y += ball.dy;
      });

      if (balls.length === 0) {
        alert("Fim de jogo! Aninha agradece 💖");
        document.location.reload();
      }

      if(rightPressed && paddle.x < canvas.width - paddle.width) {
        paddle.x += 7;
      } else if(leftPressed && paddle.x > 0) {
        paddle.x -= 7;
      }

      requestAnimationFrame
